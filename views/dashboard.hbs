<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ESP32 Receiver</title>
    {{#if @root.isLocal}}
      <title>LOCAL</title>
    {{/if}}

    <link rel="stylesheet" href="/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    {{> nav}}

    <div class="container">
      <div class="three-col">
        <aside class="sidebar">
          <div id="PINControl">
            <h2>PIN Control</h2>
            {{! додати перемикач який на сервер буде відправляти 1 або 0 }}
            <label class="switch">
              <input type="checkbox" id="pin4Switch" />
              <span class="slider">4 PIN</span>
            </label>
            <label class="switch">
              <input type="checkbox" id="pin5Switch" />
              <span class="slider">5 PIN</span>
            </label>
            <label class="switch">
              <input type="checkbox" id="pin6Switch" />
              <span class="slider">6 PIN</span>
            </label>
             <label class="switch">
              <input type="checkbox" id="pin7Switch" />
              <span class="slider">7 PIN</span>
            </label>
          </div>
          <div id="PINControl">
            <h2>PIN State</h2>
            {{! додати перемикач який на сервер буде відправляти 1 або 0 }}
            {{! додати блок який буде показувати стан кожного кольором червоний/зелений з PIN з сервера отрисуючи дані з запита на ендпоінт /pinstate  }}
            <div id="pinState">
              <div class="pin" data-pin="pin4">
                <span class="pin-label">4 PIN</span>
                <span class="pin-status red">OFF</span>
              </div>
              <div class="pin" data-pin="pin5">
                <span class="pin-label">5 PIN</span>
                <span class="pin-status red">OFF</span>
              </div>
              <div class="pin" data-pin="pin6">
                <span class="pin-label">6 PIN</span>
                <span class="pin-status green">ON</span>
              </div>
              <div class="pin" data-pin="pin7">
                <span class="pin-label">7 PIN</span>
                <span class="pin-status red">OFF</span>
              </div>
            </div>
          </div>
          <div
            style="display: flex; justify-content: space-between; align-items: center;"
          >

            <h2>Received Uploads</h2>
            <button id="deleteAllBtn" class="del"><i data-lucide="trash-2" style="margin-right:6px"></i>Видалити все</button>
          </div>
          <ul id="uploadList" class="upload-list">
            {{#if list}}

              {{#each list}}
                <li data-id="{{id}}" class="device-item">
                  <div class="list-row">
                    <div class="meta">
                      <strong>{{device.name}} </strong><br />
                      <small class="upload-ip">IP: {{network.ip}}</small><br />
                      <small class="upload-time">{{time}}</small>
                    </div>
                    <div class="actions">
                      <button
                        data-id="{{id}}"
                        class="del"
                        onclick="event.stopPropagation()"
                      ><i data-lucide="trash-2"></i></button>
                    </div>
                  </div>
                  <div class="device-tooltip" aria-hidden="false">
                    <table class="device-info">
                      <tr><th colspan="2">Device Information</th></tr>
                      <tr><td>Name:</td><td>{{device.name}}</td></tr>
                      <tr><td>Chip Model:</td><td>{{device.chipModel}}</td></tr>
                      <tr><td>CPU Freq:</td><td>{{device.cpuFreqMHz}}
                          MHz</td></tr>
                      <tr><td>Flash Size:</td><td>{{device.flashSizeMB}}
                          MB</td></tr>
                      <tr><td>SDK Version:</td><td
                        >{{device.sdkVersion}}</td></tr>
                      <tr><td>MAC Address:</td><td
                        >{{device.macAddress}}</td></tr>
                      <tr><th colspan="2">Network Information</th></tr>
                      <tr><td>SSID:</td><td>{{network.ssid}}</td></tr>
                      <tr><td>IP:</td><td>{{network.ip}}</td></tr>
                      <tr><td>RSSI:</td><td>{{network.rssi}} dBm</td></tr>
                      <tr><td>Channel:</td><td>{{network.channel}}</td></tr>
                      {{#if sensors}}
                        <tr><th colspan="2">Sensor Data</th></tr>
                        {{#if sensors.lux}}<tr><td>Light Level:</td><td
                            >{{sensors.lux}} lux</td></tr>{{/if}}
                        {{#if sensors.temperature_aht}}<tr><td>AHT Temperature:</td><td
                            >{{sensors.temperature_aht}}°C</td></tr>{{/if}}
                        {{#if sensors.humidity_aht}}<tr><td>AHT Humidity:</td><td
                            >{{sensors.humidity_aht}}%</td></tr>{{/if}}
                        {{#if sensors.temperature_dht}}<tr><td>DHT Temperature:</td><td
                            >{{sensors.temperature_dht}}°C</td></tr>{{/if}}
                        {{#if sensors.humidity_dht}}<tr><td>DHT Humidity:</td><td
                            >{{sensors.humidity_dht}}%</td></tr>{{/if}}
                        {{#if sensors.battery}}<tr><td>Battery:</td><td
                            >{{sensors.battery}}V</td></tr>{{/if}}
                        {{#if sensors.uptime}}<tr><td>Uptime:</td><td
                            >{{sensors.uptime}}ms</td></tr>{{/if}}
                      {{/if}}
                    </table>
                  </div>
                </li>
              {{/each}}
            {{else}}
              <li>No uploads yet</li>
            {{/if}}
          </ul>
          <div class="pagination">
            <div class="pagination-controls">
              <button id="prevPage" class="pagination-btn"><i data-lucide="chevron-left" style="margin-right:6px"></i>Previous</button>
              <span class="page-info">Page
                <span id="currentPage">1</span></span>
              <button id="nextPage" class="pagination-btn">Next <i data-lucide="chevron-right" style="margin-left:6px"></i></button>
            </div>
            <div class="items-per-page">
              <label for="itemsPerPageSelect">Items per page:</label>
              <select id="itemsPerPageSelect" class="items-per-page-select">
                <option value="5" selected>5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select>
            </div>
          </div>
        </aside>

        <main class="detail">
          <h2>Details</h2>
          <div id="detailView">
            <p>Select an upload on the left to see details.</p>
          </div>

        </main>
        
      </div>
    </div>

  </body>
  <script src="js/script.js"></script>
</html>