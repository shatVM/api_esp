<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP Pin Control</title>
    <meta name="theme-color" content="#1877f2"/>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/styles.css">
     <!-- Lucide Icons CDN --><script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    {{> nav}}
    
    <div class="container">
        <div class="three-col" style="grid-template-columns: 1fr; max-width: 600px; margin: auto;">
            <aside class="sidebar">
                {{#if latestData}}
                <div id="SensorInfo">
                    <h2>–û—Å—Ç–∞–Ω–Ω—ñ –¥–∞–Ω—ñ –∑ –¥–∞—Ç—á–∏–∫—ñ–≤</h2>
                    <div class="sensor-grid">
                        <div class="sensor-item">
                            <span class="sensor-label">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</span>
                            <span id="sensor-temp" class="sensor-value">{{toFixed latestData.temperature_dht_c 1}} ¬∞C</span>
                        </div>
                        <div class="sensor-item">
                            <span class="sensor-label">üíß –í–æ–ª–æ–≥—ñ—Å—Ç—å</span>
                            <span id="sensor-humid" class="sensor-value">{{toFixed latestData.humidity_dht_pct 1}} %</span>
                        </div>
                        <div class="sensor-item">
                            <span class="sensor-label">‚òÄÔ∏è –û—Å–≤—ñ—Ç–ª–µ–Ω—ñ—Å—Ç—å</span>
                            <span id="sensor-lux" class="sensor-value">{{toFixed latestData.lux 1}} lux</span>
                        </div>
                        <div id="battery-item" class="sensor-item">
                            <span class="sensor-label">üîã –ë–∞—Ç–∞—Ä–µ—è</span>
                            <span id="sensor-battery" class="sensor-value">{{toFixed latestData.battery_v 1}} V</span>
                        </div>
                    </div>
                </div>
                {{/if}}
                <!-- –ü—Ä–∏—Ö–æ–≤–∞–Ω—ñ –ø–µ—Ä–µ–º–∏–∫–∞—á—ñ, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è –ª–æ–≥—ñ–∫–∏ -->
                <div style="display: none;">
                    <input type="checkbox" id="pin12Switch" />
                    <input type="checkbox" id="pin13Switch" />
                    <input type="checkbox" id="pin14Switch" />
                </div>
    
                <div id="PIN_—Åontrol">
                    <h2>PIN State</h2>
                    <div id="pinState">
                      <div class="pin" data-pin="pin12">
                        <span class="pin-label">PIN 12 (D6)</span>
                        <span class="pin-status red">OFF</span>
                      </div>
                      <div class="pin" data-pin="pin13">
                        <span class="pin-label">PIN 13 (D7)</span>
                        <span class="pin-status red">OFF</span>
                      </div>
                      <div class="pin" data-pin="pin14">
                        <span class="pin-label">PIN 14 (D5)</span>
                        <span class="pin-status red">OFF</span>
                      </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    
    <script src="/js/pin-control.js"></script>
    <script>
      // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => console.log('Service Worker registered successfully! Scope: ', registration.scope))
            .catch(err => console.log('Service Worker registration failed: ', err));
        });
      }
    </script>
</body>
</html>
            </div>


        </main>
    </div>

    <script src="/js/control.js"></script>
</body>
</html>